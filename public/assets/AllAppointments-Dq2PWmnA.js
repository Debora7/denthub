import{r as v,T as j,h as D,o as c,f as d,a as i,u as _,w as m,F as P,Z as ne,b as e,i as $,m as O,p as ie,q as V,n as p,e as h,d as l,t as a,g as L,c as F}from"./app-m8O9x8db.js";import{_ as ce}from"./AuthenticatedLayout-oP7uY6wx.js";import{D as E}from"./DangerButton-BeXBnfCZ.js";import{P as I}from"./PrimaryButton-D-IF3Vpv.js";import{_ as T,a as q}from"./Modal-90c__Ftz.js";import{t as re}from"./toastr.min-sOBkje4z.js";import{s as ue}from"./index-C1CPr9I7.js";import{_ as de}from"./TextareaInput-DQQc-ID_.js";import{_ as Q}from"./InputLabel-vZ1nCw19.js";import"./ApplicationLogo-L9kXl_zd.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const me={class:"py-12"},ve={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},_e={class:"mb-4"},fe={class:"input-group mb-3"},he=e("span",{class:"input-group-text",id:"basic-addon1",style:{"background-color":"white"}},[e("i",{class:"fas fa-search"})],-1),pe={class:"d-flex justify-content-between mb-3"},ge={class:"input-group"},ye=e("span",{class:"input-group-text",style:{"background-color":"white"}},"Data",-1),we=e("option",{value:""},"Status",-1),ke=e("option",{value:"Confirmată"},"Confirmată",-1),be=e("option",{value:"Anulată"},"Anulată",-1),xe=e("option",{value:"Anulată"},"Onorată",-1),Ce=[we,ke,be,xe],De={key:0},Pe={class:"card-body p-4"},Se={class:"row"},Ae={class:"col-md-6"},$e={class:"card-title"},Ve={class:"card-subtitle mb-2 text-muted"},Le={class:"card-text text-gray-600 mt-2"},Me=e("strong",null,"Data și ora programării:",-1),Re={class:"card-text text-gray-600 mt-2"},ze=e("strong",null,"Preț:",-1),Be={class:"card-text text-gray-600 mt-2"},Ne=e("strong",null,"Locație: ",-1),Ue=["href","onClick"],je={class:"card-text mt-2"},Oe={class:"col-md-6 d-flex flex-column justify-content-end align-items-end"},Fe={class:"d-flex justify-content-center align-items-center"},Ee={class:"pagination mb-0 custom-pagination"},Ie=["onClick"],Te=["value"],qe=["value"],Qe={key:1},Ze=e("div",{class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},[e("div",{class:"p-6 text-gray-900"}," Nu aveți programări făcute. ")],-1),Ge=[Ze],He={key:0,class:"p-6"},Je=e("h5",null,"Dorești să anulezi următoarea programare?",-1),Ke=e("strong",null,"Doctor:",-1),We=e("strong",null,"Serviciu:",-1),Xe=e("strong",null,"Data și ora:",-1),Ye=e("strong",null,"Preț:",-1),et=e("strong",null,"Locație:",-1),tt={class:"mt-6 flex justify-end"},st={class:"p-6"},ot={class:"text-lg font-medium text-gray-900"},at={class:"mt-4"},lt={class:"mt-4"},nt={class:"mt-6 flex justify-end"},gt={__name:"AllAppointments",props:["appointments"],emits:["consult-clicked"],setup(Z,{emit:G}){const H=Z,J=G,k=v(!1),b=v(!1),u=v(null),M=j({id:null}),n=j({id:null,rating:0,review:"",doctor:"",service:"",consult_id:0}),K=s=>{const o=s.address,t=s.city.name,f=s.county.name;return`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(o+", "+t+", "+f)}`},W=s=>{J("consult-clicked",s)},X=s=>{const o={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(s).toLocaleDateString("ro-RO",o)},Y=D(()=>H.appointments.map(s=>({...s,formatted_date:X(s.appointment_date)}))),S=v(""),r=v(1),R=[15,25,50,100],g=v(R[0]),x=v(null),C=v(""),z=D(()=>{const s=S.value.toLowerCase();return Y.value.filter(o=>{const t=o.consult.doctor.toLowerCase().includes(s)||o.consult.service.toLowerCase().includes(s),f=x.value?new Date(o.appointment_date).toDateString()===new Date(x.value).toDateString():!0,le=C.value?o.status===C.value:!0;return t&&f&&le})}),B=D(()=>{const s=(r.value-1)*g.value,o=s+g.value;return z.value.slice(s,o)}),y=D(()=>Math.ceil(z.value.length/g.value)),w=s=>{s>=1&&s<=y.value&&(r.value=s)},ee=s=>{g.value=parseInt(s.target.value),r.value=1},te=s=>{u.value=s,M.id=s.id,k.value=!0},se=s=>{n.id=s.id,n.doctor=s.consult.doctor,n.service=s.consult.service,n.consult_id=s.consult.id,b.value=!0},N=()=>{k.value=!1},U=()=>{b.value=!1},oe=()=>{M.post(route("consult.client.appointment.destroy"),{onFinish:()=>{k.value=!1,A("Programarea a fost anulată")},onError:()=>{A("A apărut o eroare","error")}})},A=(s,o="success")=>{re[o](s)},ae=()=>{n.post(route("consult.client.appointment.review.store"),{onFinish:()=>{n.reset(),b.value=!1,A("Recenzia a fost salvată")}})};return(s,o)=>(c(),d(P,null,[i(_(ne),{title:"Programari"}),i(ce,null,{default:m(()=>[e("div",me,[e("div",ve,[e("div",_e,[e("div",fe,[he,$(e("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>S.value=t),type:"text",placeholder:"Caută",class:"form-control","aria-label":"Search","aria-describedby":"basic-addon1"},null,512),[[O,S.value]])]),e("div",pe,[e("div",ge,[ye,$(e("input",{type:"date","onUpdate:modelValue":o[1]||(o[1]=t=>x.value=t),class:"form-control"},null,512),[[O,x.value]])]),$(e("select",{"onUpdate:modelValue":o[2]||(o[2]=t=>C.value=t),class:"form-select ms-2","aria-label":"Select Status"},Ce,512),[[ie,C.value]])])]),B.value.length>0?(c(),d("div",De,[(c(!0),d(P,null,V(B.value,t=>(c(),d("div",{key:t.id,class:"card mb-4 border-gray-200 shadow-lg"},[e("div",Pe,[e("div",Se,[e("div",Ae,[e("h3",$e," Dr. "+a(t.consult.doctor),1),e("h4",Ve,a(t.consult.service),1),e("p",Le,[Me,l(" "+a(t.formatted_date),1)]),e("p",Re,[ze,l(" "+a(t.consult.price)+" Lei ",1)]),e("p",Be,[Ne,e("a",{class:"text-muted",style:{"text-decoration":"none"},href:K(t.consult),target:"_blank",onClick:f=>W(t.consult)},a(t.consult.county.name)+", "+a(t.consult.city.name)+", "+a(t.consult.address),9,Ue)]),e("p",je,[e("span",{class:p(["badge",t.status==="Confirmată"?"badge-success":t.status==="Onorată"?"badge-primary":"badge-danger"])},a(t.status),3)])]),e("div",Oe,[t.status==="Onorată"?(c(),F(I,{key:0,onClick:f=>se(t)},{default:m(()=>[l("Recenzie")]),_:2},1032,["onClick"])):L("",!0),t.status==="Confirmată"?(c(),F(E,{key:1,class:"ms-3 mt-2",onClick:f=>te(t)},{default:m(()=>[l(" Anulează ")]),_:2},1032,["onClick"])):L("",!0)])])])]))),128)),e("nav",Fe,[e("ul",Ee,[e("li",{class:p(["page-item",{disabled:r.value===1}])},[e("a",{class:"page-link",href:"#",onClick:o[3]||(o[3]=h(t=>w(1),["prevent"]))}," << ")],2),e("li",{class:p(["page-item",{disabled:r.value===1}])},[e("a",{class:"page-link",href:"#",onClick:o[4]||(o[4]=h(t=>w(r.value-1),["prevent"]))}," < ")],2),(c(!0),d(P,null,V(y.value,t=>(c(),d("li",{class:p(["page-item",{active:t===r.value}]),key:t},[e("a",{class:"page-link",href:"#",onClick:h(f=>w(t),["prevent"])},a(t),9,Ie)],2))),128)),e("li",{class:p(["page-item",{disabled:r.value===y.value}])},[e("a",{class:"page-link",href:"#",onClick:o[5]||(o[5]=h(t=>w(r.value+1),["prevent"]))}," > ")],2),e("li",{class:p(["page-item",{disabled:r.value===y.value}])},[e("a",{class:"page-link",href:"#",onClick:o[6]||(o[6]=h(t=>w(y.value),["prevent"]))}," >> ")],2)]),e("select",{class:"form-select form-select-sm ms-3",onChange:ee,value:g.value,style:{width:"auto"}},[(c(),d(P,null,V(R,t=>e("option",{key:t,value:t},a(t),9,qe)),64))],40,Te)])])):(c(),d("div",Qe,Ge))])]),i(T,{show:k.value,onClose:N},{default:m(()=>[e("form",{onSubmit:h(oe,["prevent"])},[u.value?(c(),d("div",He,[Je,e("p",null,[Ke,l(" "+a(u.value.consult.doctor),1)]),e("p",null,[We,l(" "+a(u.value.consult.service),1)]),e("p",null,[Xe,l(" "+a(u.value.formatted_date),1)]),e("p",null,[Ye,l(" "+a(u.value.consult.price)+" Lei ",1)]),e("p",null,[et,l(" "+a(u.value.consult.county.name)+", "+a(u.value.consult.city.name)+", "+a(u.value.consult.address),1)]),e("div",tt,[i(E,{type:"submit"},{default:m(()=>[l(" Șterge ")]),_:1}),i(q,{onClick:N,class:"ms-3"},{default:m(()=>[l(" Închide ")]),_:1})])])):L("",!0)],32)]),_:1},8,["show"]),i(T,{show:b.value,onClose:U},{default:m(()=>[e("div",st,[e("h2",ot," Lasă o recenzie doctorului "+a(_(n).doctor)+" pentru "+a(_(n).service)+": ",1),e("form",{onSubmit:h(ae,["prevent"])},[e("div",at,[i(Q,{for:"rating",value:"Câte stele ai da experienței tale?"}),i(_(ue),{class:"mt-1 block w-full",modelValue:_(n).rating,"onUpdate:modelValue":o[7]||(o[7]=t=>_(n).rating=t),stars:5},null,8,["modelValue"])]),e("div",lt,[i(Q,{for:"rating",value:"Exteriența ta"}),i(de,{modelValue:_(n).review,"onUpdate:modelValue":o[8]||(o[8]=t=>_(n).review=t),class:"mt-1 block w-full",id:"review"},null,8,["modelValue"])]),e("div",nt,[i(I,{type:"submit"},{default:m(()=>[l("Postează")]),_:1}),i(q,{onClick:U,class:"ms-3"},{default:m(()=>[l("Închide")]),_:1})])],32)])]),_:1},8,["show"])]),_:1})],64))}};export{gt as default};
